# 주요 개념
> Django 관련 주요 개념 정리

* Django가 사용되는 이유 및 성능 유지가 가능한 이유 등

<hr>
<br>

### [Django]

#### 1. MVT의 Model
* Django MVT 패턴은 전반적으로 Ruby on Rails MVC 패턴과 매우 흡사
* Ruby on Rails의 MVC 패턴에서 같은 M을 수행하는 패턴 
* DB를 사용할 수 있게 DBMS에 연동하거나 Table을 Define하는 작업들이 포함됌

### [각 App의 models.py - User App 예시]
```python
from django.db import models

# Create your models here.


class User(models.Model):
    username = models.CharField(max_length=64,
                                verbose_name='username')

    password = models.CharField(max_length=64,
                                verbose_name='password')

    register_date = models.DateTimeField(auto_now_add=True,
                                         verbose_name='register date')

    # Admin 페이지에서 class가 문자열로 변환됐을 때, 어떻게 표현이 될지 설정
    def __str__(self):
        return self.username

    class Meta:  # table명
        db_table = 'User'

```

### [Terminal]
```zsh
python3 manage.py makemigrations # 0001_initial.py 형상관리용 데이터 생성
python3 manage.py migrate        # 실제 DB에 적용
sqlite3 db.sqlite3               # DBMS 접속
.tables
.schema [tableName]
```

#### 2. MVT의 View
* View 패턴으로, Request에 맞는 올바른 html 페이지가 보이도록 연결
* Project - urls.py --> app - urls.py --> app - views.py --> template.html 순으로 연결

### [project/urls.py]
```python
from django.contrib import admin
from django.urls import path, include

# /admin/* 이러한 형태의 주소는 모두 admin 페이지로 간다
urlpatterns = [
    path('admin/', admin.site.urls),
    path('user/', include('user.urls'))
]
```

### [app/views.py]
```python
from django.shortcuts import render

# Create your views here.


def register(request):
    return render(request, 'register.html')

```

### [app/urls.py]
```python
from django.urls import path
from . import views

urlpatterns = [
    path('register/', views.register)
]
```

```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h1>회원가입</h1>
    <form action="" method="POST" action=".">
        {% csrf_token %}
        <div>
            <label for="username">유저명</label>
            <input type="text" name="" id="username">
        </div>
        <br>
        <div>
            <label for="password">비밀번호</label>
            <input type="password" name="" id="password">
        </div>
        <br>
        <div>
            <label for="re-password">비밀번호 확인</label>
            <input type="password" name="" id="re-password">
        </div>
        <br>
        <button type="submit">등록</button>
    </form>
</body>

</html>
```

#### 3. MVT의 Template
* Virtual DOM은 JavaScript 객체로서 Memory에 적재되기 때문에, 빠르게 구축될 수 있다는 장점이 존재

#### 4. Superuser + Admin Page

### [Terminal]
```zsh
python3 manage.py createsuperuser
```

### [admin.py]
```python
from django.contrib import admin
from .models import User

# Register your models here.


class UserAdmin(admin.ModelAdmin):
    list_display = ('username', 'password')

# Admin Page에 모델 등록
admin.site.register(User, UserAdmin)
```
* Default 세팅으로 /admin/* Request는 Admin Page로 이동 (urls.py 참고)
* Admin Page에 어떠한 모델이 보일 것이고, 어떠한 내용들이 Display될지 설정

<br>
<hr>
<br>

### [작업 환경]

#### 1. Virtual Environment(가상 환경)에 Django 환경 셋업

### [Terminal]
```zsh
pip3 install virtualenv
virtualenv virtual_env
source virtual_env/bin/activate
pip3 install django
django-admin startproject Django_Backend // djangdjango-admin startproject [projectName] 
django-admin startapp     user           // django-admin startapp [appName]
```
* 하나의 PC에서 다수의 프로젝트를 진행할 때 같은 패키지들을 사용하면서도 다른 버전의 패키지들을 사용하게 되면 에러 상항이 많이 발생할 수 있기 때문에 하나의 프로젝트만을 위한 가상 환경을 구축하는 것이 Convention
 * 다만, 꼭 virtualenv를 사용할 필요는 
* 하나의 Project 안에 다수의 App 존재 (1:N 관계)


### [settings.py]
```python
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'user'
]
```
* Project의 setting.py에 생성한 app들을 등록하는 절차
* 

#### 프로젝트 시작

### [Terminal]
```zsh
python3 manage.py runserver
```
