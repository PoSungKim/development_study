# 환경 세팅
> Django + Django Rest Framework + AWS RDS

* Backend 서버로 RESTful API 구축이 중점
* ```python pip3 freeze > requirements.txt ```


<hr>
<br>

### [세팅 절차 1]

#### 1. 디렉토리 뼈대

* React_Frontend
* virtual_env
* Django_Backend
  * Django_Backend
    * ...
  * user
    * ...
  * manage.py


<br>

#### 2. Virtual Environment (가상 환경) 및 Project 및 App 생성
### [Terminal - user 예시]
```zsh
pip3 install virtualenv
virtualenv virtual_env
source virtual_env/bin/activate
pip3 install django
django-admin startproject Django_Backend // djangdjango-admin startproject [projectName] 
django-admin startapp     user           // django-admin startapp [appName]
```
* 하나의 Project 안에 다수의 App 존재 (1:N 관계)
  * 구축하고자 하는 서비스가 Project, 그리고 해당 Project에 필요한 기능들이 App으로 구현되는 구조
* pip install은 virtualenv 환경에만 적용
* pip3 install은 virtualenv 환경과 local 환경 모두에 적용
  * 현재 프로젝트에서는 pip3 install을 사용했지만, 다음 프로젝트부터는 pip install로 진행할 예정


### [settings.py]
```python
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'user'
]
```
* Project의 setting.py에 생성한 app들을 등록하는 절차
* App과 추가로 설치하는 패키지들도 등록 필요 

#### 3. MySQL RDBMS 연동 

### [각 App의 models.py - User App 예시]
```python
from django.db import models

# Create your models here.


class User(models.Model):
    username = models.CharField(max_length=64,
                                verbose_name='username')

    password = models.CharField(max_length=64,
                                verbose_name='password')

    register_date = models.DateTimeField(auto_now_add=True,
                                         verbose_name='register date')

    # Admin 페이지에서 class가 문자열로 변환됐을 때, 어떻게 표현이 될지 설정
    def __str__(self):
        return self.username

    class Meta:  # table명
        db_table = 'User'

```

### [Terminal]
``` zsh
python3 manage.py makemigrations 
python3 manage.py migrate
python3 manage.py runserver
```

#### 4. Superuser + Admin Page

### [Terminal]
```zsh
python3 manage.py createsuperuser # superuser 아이디, 이메일, 패스워드 설정 진행
```

### [admin.py]
```python
from django.contrib import admin
from .models import User

# Register your models here.


class UserAdmin(admin.ModelAdmin):
    list_display = ('username', 'password')

# Admin Page에 모델 등록
admin.site.register(User, UserAdmin)
```
