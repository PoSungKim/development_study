# AJAX
> Asynchronous JavaScript and XML

* Javascript를 사용한 비동기 통신 기능을 수행해주는 프로그램

<hr>
<br>

## 1. 꼭 XML만 사용하나요?

#### 1998년에 설립된 Educational Website인 W3Schools에 따르면, 마치 XML만 사용하는 것처럼 이름이 지어진 것은 Misleading하다고 한다. 
#### 최근에는 ```Simple Text```와 ```JSON```을 더 많이 사용한다

<br>

### [W3Schools]
```bash
AJAX is a misleading name.
AJAX applications might use XML to transport data, but it is equally common to transport data as plain text or JSON text.
```
<div align="center">  
  
  ![스크린샷 2021-04-24 오후 1 05 42](https://user-images.githubusercontent.com/37537227/115946667-c8f34780-a4fd-11eb-95ac-415ba4a9b7ba.png)

</div>

* 보통의 AJAX 과정
  * Client에서 Browswer built-in XMLHttpRequest 객체를 사용해서 Server로 Request를 보낸다
  * Server로부터 Response를 받는다
  * Page 전체를 다시 업로드하는 것이 아니라, Parts of the whole page만 업데이트한다


<br>
<hr>
<br>

## 2. Promise 객체

#### AJAX 방식은 Promise 객체라는 return 값을 통해서 통신의 정상 유무 등을 확인한다.

### [W3Schools]
<div align="center" >
  
  <img width="731" alt="스크린샷 2021-04-24 오후 8 16 29" src="https://user-images.githubusercontent.com/37537227/115956809-f827aa00-a539-11eb-8b64-72c5151e1d5d.png">

</div>

* MDN Web Docs에 따르면, Promise 객체는 ```비동기 작업이 맞이할 미래의 완료 또는 실패와 그 결과 값을 나타낸다```

<br>

* Promise는 총 3가지의 상태를 가진다
  * 대기 (Pending)   : 이행하거나 거부되지 않은 초기 상태
  * 이행 (Fulfiiled) : 연산이 성공적으로 완료됌
  * 거부 (Rejected)  : 연산이 실패함   

## 3. AJAX 방식 1: Fetch()

#### JavaScript 내장 라이브러리로 import 할 필요없으며, return 값은 Promise 객체이다.

### [Text (String) 값을 받을 때]
```js
fetch<User2[]>("http://localhost:8080/api/user/", {
    method: 'GET',
    headers: {
        "Accept": "application/json",
        "Content-Type": "application/json",
    }
}).then(response => response.text()
    .then(data => {
        console.log(data);
    })
).catch(error => {
    console.log(error);
});
```

### [JSON 값을 받을 때]
```js
fetch<User2[]>("http://localhost:8080/api/user/", {
    method: 'GET',
    headers: {
        "Accept": "application/json",
        "Content-Type": "application/json",
    }
}).then(response => response.json()
    .then(data => {
        console.log(data);
    })
).catch(error => {
    console.log(error);
});
```
* response.json() 함수 또한 Return 값이 Promise이기 때문에 

<br>
<hr>
<br>

## 4. AJAX 방식 2: Axios()

#### 외부 라이브러리로 다운로드 이후에 import 해서 사용해야 하며, 자동 JSON 데이터 변환 등 보다 더 편리하게 사용할 수 있게 설계되었다

### [Text 혹은 JSON 값을 받을 때]
```js
axios.get<User2[]>("http://localhost:8080/api/user/", {
    headers: {
        'Accept': 'application/json',
        "Content-Type": "application/json"
    },
}).then(response => {
    console.log(response.data);
}).catch(error => {
    console.log(error);
});
```

<br>
<hr>
<br>

## 5. Contents-Type Header와 Accept Header

#### AJAX 통신 시, 상황에 맞춰 Headers 속성 값들을 정리해주어야 한다

### [W3Schools]
```js
AJAX is a misleading name.
AJAX applications might use XML to transport data, but it is equally common to transport data as plain text or JSON text.
```

<br>
<hr>
<br>
