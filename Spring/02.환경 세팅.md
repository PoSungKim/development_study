
# 환경 세팅
> 국가 표준프레임워크

* 방대한 기능이 제공되며, 그만큼 안정적이기 때문에, 배우는 것이 필수

<hr>
<br>

## 1. VS Code Spring Boot Extension Pack, Java Extension Pack, OpenJDK 설치

#### 설치 후에는 https://start.spring.io/ 접속해서 Spring Boot Project 생성

### [https://start.spring.io/]

<img width="1255" alt="스크린샷 2021-04-24 오전 12 24 20" src="https://user-images.githubusercontent.com/37537227/115893664-6f563300-a493-11eb-9329-dc6836343e1a.png">

```bash
Project             : Gradle Project
Language            : Java
Spring Boot Version : 2.4.5
Group               : com.pfm
Artifact            : Spring_Backend
Name                : Spring_Backend
Package name        : com.pfm.Spring_Backend
Packaging           : WAR 
Java                : 16
Dependencies        : Spring Boot DevTools, Spring Web, MyBatis Framework, H2 Database
```
* WAR ( Web Application Archive ) : 웹 어플리케이션 전용 패키징으로, 웹 사이트 배포에 좀더 특화되어 있다.


### [OpenJDK 16 설치]

<div align="center">
 <img width="664" alt="스크린샷 2021-04-24 오후 12 39 06" src="https://user-images.githubusercontent.com/37537227/115946122-11a90180-a4fa-11eb-884c-2dcf8084f9d7.png">
</div>
* LTS는 Long Term Support인데, 3년 주기로 LTS로 변환된다고 한다.

<br>

* Dependencies
  * Spring Boot DevTools : Provides fast application restarts, LiveReload, and configurations for enhanced development experience.
  * Spring Web : Build web, including RESTful, applications using Spring MVC. Uses Apache Tomcat as the default embedded container.
  * MyBatis Framework : Persistence framework with support for custom SQL, stored procedures and advanced mappings. MyBatis couples objects with stored procedures or SQL statements using a XML descriptor or annotations.
  * H2 Database : Provides a fast in-memory database that supports JDBC API and R2DBC access, with a small (2mb) footprint. Supports embedded and server modes as well as a browser based console application.

<br>

* 결과적으로 zip 파일을 만들어줌

<br>
<hr>
<br>

## 2. DB연동 관련 에러

#### 연동까지 모두 완료해야지 Spring Project가 정상적으로 실행된다

### [Error]
```bash

***************************
APPLICATION FAILED TO START
***************************

Description:

Failed to configure a DataSource: 'url' attribute is not specified and no embedded datasource could be configured.

Reason: Failed to determine a suitable driver class


Action:

Consider the following:
If you want an embedded database (H2, HSQL or Derby), please put it on the classpath.
If you have database settings to be loaded from a particular profile you may need to activate it (no profiles are currently active).
```

### [application.properties]
```bash
#Configuration
server.port = 8080

#H2 (testdb, sa) jdbcTemplate과 함께 쓰면 유용!
spring.h2.console.enabled=true

#MySQL 설정
spring.datasource.url=jdbc:mysql://pfm-mysql.cua32mtg2la4.ap-northeast-2.rds.amazonaws.com:3306/pfm_mysql?allowPublicKeyRetrieval=true&useSSL=false
spring.datasource.username=admin
spring.datasource.password=adminadmin
```
* H2      - In-memory   DBMS
  * 메인 DBMS와 연결이 안되면 붙는 형식으로 사용할 수 있고, 간단하고 빠르게 테스트 및 개발을 진행할 때 유용하게 사용할 수 있다고 한다.

<br>
 
* AWS RDS - Cloud MySQL DBMS
  * AWS Cloud DBMS로, 인터넷만 연결되어 있다면, 언제어디서든 접속 가능

<br>
<hr>
<br>

## 3.1 Restful API 생성 (GET)

#### [RequestBody와 ResponseBody에 대한 팁 관련 글](https://lifejusik1004.tistory.com/entry/Spring-%EC%8A%A4%ED%94%84%EB%A7%81-RequestBody-ResponseBody-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0)

### [HelloController.java - text 값을 리턴할 때]
```java
@CrossOrigin
@RestController
@RequestMapping("/api/user")
public class HelloController {

    @GetMapping("/{id}")
    public @ResponseBody Hello hello(@PathVariable("id") int id) {
        return "Hello User";
    }
```

### [HelloController.java - JSON 값을 리턴할 때]
```java
...

class Hello {
    private String name;

    public Hello(final String name) {
        this.name = name;
    }

    public String getValue() {
        return this.name;
    }

    public void setValue(final String name) {
        this.name = name;
    }
}

@CrossOrigin
@RestController
@RequestMapping("/api/user")
public class HelloController {

    @GetMapping("/{id}")
    public @ResponseBody Hello hello(@PathVariable("id") int id) {
        Hello test = new Hello("Hello User");
        System.out.println(id);
        return test;
    }
}
```

* ```@RequestBody```   : Client로부터 받은 HTTP 요청 body 내용을 자바 객체로 매핑해주는 역할 

<br>

* ```@ResponseBody```  : 자바 객체를 Client로 보낼 HTTP 요청 body 내용으로 매핑해주는 역할
  * ```@Restcontroller```: 를 사용하면 알아서 ```@ResponseBody``` 에노테이션이 붙어서 꼭 명시해줄 필요는 없다 (하지만 넣었다).

<br>

* ```@PathVariable```  : GET/PUT 방식은 URI에 Resource가 포함되어 요청이 오기 때문에 이를 ```{id}```처럼 찾아서 사용할 수 있다.

<br>
<hr>
<br>

## 3.2 Restful API 생성 (POST)

#### [RequestBody와 ResponseBody에 대한 팁 관련 글](https://lifejusik1004.tistory.com/entry/Spring-%EC%8A%A4%ED%94%84%EB%A7%81-RequestBody-ResponseBody-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0)

### [InputVO.java]
```java
package com.pfm.Spring_Backend;

public class InputVO {

    private String value;

    public InputVO() {
    }

    public InputVO(final String value) {
        this.value = value;
    }

    public void print() {
        System.out.println(this.value);
    }

    public String getValue() {
        return this.value;
    }

    public void setValue(final String value) {
        this.value = value;
    }

}
```

### [HelloController.java]
```java
@CrossOrigin
@RestController
@RequestMapping("/api/user")
public class HelloController {

    @PostMapping("/")
    public @ResponseBody Hello hello(@RequestBody InputVO inputVO) {
        Hello test = new Hello("Hello User");
        inputVO.print();
        return test;
    }
}
```

* ```RequestBody```로 받을 수 있는 방식은 2가지가 있다
  * ```클래스```를 만들어서 객체의 인스턴스로 받는 방식
    * ```@RequestBody InputVO inputVO```
  * ```HashMap``` 등 ```Map``` 인터페이스의 다양한 클래스로 받는 방식
    * ``````
