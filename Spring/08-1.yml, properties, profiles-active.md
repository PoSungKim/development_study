# yml, properties, profiles-active
> 환경에 따라, 값을 달리 설정하고 싶을 때 사용
* properties와 yml 파일은 같은 용도로 사용되지만, yml 파일 내에서 groovy 문법이 사용 가능하다는 장점이 존재

<hr>
<br>

## Property 값 설정
#### jar 파일 실행하면서 Property 값 설정 가능
#### [유용글](https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&blogId=youreme&logNo=110158875473)

<br>

### [gradlew에게 파라미터 전달을 통한 방법]
```bash
/gradlew bootrun --args="--this.is.from=fasfasfasfasdfas"
```

<br>

### [String JVM 옵션 파라미터를 통한 방법]

```java
bootRun {
    String thisIsFrom = System.properties['this.is.from']
    systemProperty "this.is.from", thisIsFrom
}
```
* build.gradle에 상단 내용 포함

<br>

```bash
./gradlew bootRun -Dthis.is.from=cli
java -jar -Dthis.is.from=cli mySpringProject.jar
```
* `-D`을 붙여주면 JVM에게 String으로 파라미터를 전달 가능

<br>
<hr>
<br>

## Property 값 가져오기
#### [유용글](https://bcp0109.tistory.com/227) 

<br>

### [Spring @Value 예시]
```java
@PropertySource("classpath:application-another.properties")

@Value(${"this.is.from.another"})
String valueFromAnother;
```
* `@PropertySource` 
  * 특정 .properties 파일에서 값을 가져올 때 사용
  * .yml 파일은 지원되지 않는다. 다만, application.yml은 default로 잘 가져와진다는 점 참고 필요
* `@Value`
  * `${}` 쉘 문법처럼 감싸서 변수 이름을 넣으면 값을 가져와서 변수에 주입해준다

<br>

### [Spring env.getProperty 예시]
```java
@Autowired
Environment env;

System.out.println(env.getProperty("this.is.from.another"));
```

<br>
<hr>
<br>

## profiles-active
#### [유용글](https://stackoverflow.com/questions/31038250/setting-active-profile-and-config-location-from-command-line-in-spring-boot)

<br>

### [application.yml]
```groovy
--- #local 환경 구분자
spring:
  profiles: local

--- #dev 환경 구분자
spring:
  profiles: dev

--- #prod 환경 구분자
spring:
  profiles: prod
```

* 개발 환경인지 운영 환경인지에 따라서 Property 값이 달리지게 세팅 가능

