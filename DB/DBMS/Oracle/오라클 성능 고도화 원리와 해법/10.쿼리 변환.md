# 쿼리 변환
> 
* 

<hr>
<br>

## 쿼리 변환이란?
#### 

<br>

### 쿼리 변환이란?
* 간단한 쿼리문도 52개의 다른 SQL로 표현 가능
  ```sql
  SELECT DISTINCT S.SNAME
  FROM   S, SP
  WHERE  S.S#  = SP.S#
  AND    SP.P# = 'P2';
  ```
  * 상단의 쿼리가 하단의 쿼리들로 표현이 될 수 있으며, 결과집합은 동일하지만, 형태에 따라 수행 속도가 다를 수 있다
  ```sql
  SELECT DISTINCT S.SNAME FROM S
  WHERE  S.S# IN (SELECT SP.S# FROM SP WHERE SP.P# = 'P2');

  SELECT DISTINCT S.SNAME FROM S WHERE EXISTS
         (SELECT * FROM SP WHERE SP.S# = S.S# AND SP.P# = 'P2');

  SELECT DISTINCT S.SNAME FROM S, SP
  WHERE  S.S# = SP.S#
  GROUP BY S.SNAME, SP.P#
  HAVING SP.P# = 'P2';

  SELECT DISTINCT S.SNAME FROM S
  WHERE  S.S# = ANY (SELECT SP.S# FROM SP WHERE SP.P# = 'P2' );

  SELECT DISTINCT S.SNAME FROM S
  WHERE  (SELECT COUNT(*) FROM SP WHERE SP.S# = S.S# AND SP.P# = 'P2') > 0;

  SELECT DISTINCT S.SNAME FROM S, SP
  WHERE  SP.P# = 'P2'
  GROUP BY S.S#, S.SNAME, SP.S#
  HAVING SP.S# = S.S#;
  ```
* 최근의 비용기반 옵티마이저는 사용자 SQL을 최적화에 유리한 형태로 재작성하는 작업을 먼저 한다
  <div align="center">
    <img width="80%" src="https://private-user-images.githubusercontent.com/37537227/301197245-b0eb6d84-1e03-4879-9e8b-870dd920412a.jpeg?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk0NzY5NTksIm5iZiI6MTcwOTQ3NjY1OSwicGF0aCI6Ii8zNzUzNzIyNy8zMDExOTcyNDUtYjBlYjZkODQtMWUwMy00ODc5LTllOGItODcwZGQ5MjA0MTJhLmpwZWc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjQwMzAzJTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI0MDMwM1QxNDM3MzlaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT1hNGIwOTJmYzliYWJmYTRjZjI0ZjQ1YjViODNkMzEwZDU5NjI5YzQwZTcxZWY3MmMyYzM3OTcwMjFlZmY2NGU0JlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCZhY3Rvcl9pZD0wJmtleV9pZD0wJnJlcG9faWQ9MCJ9.Lf1MjPKOda6tWkpL0XlR-sXjeOtSDmnh9dmaGDVp1Xw">
  </div>
  * 즉, 처음에는 하단의 두 쿼리는 수행 속도가 다를 수 있지만, 쿼리 변환이 작동하면 동일한 수행 속도로 맞춰질 수 있다
  ```sql
  select *
  from   dept d
  where  not exists (select 'x'
                     from   emp
                     where  deptno = d.deptno);

  select d.*
  from   dept d, emp e
  where  e.deptno(+) = d.deptno
  and    e.rowid is null;
  ```

<br>
<hr>
<br>
