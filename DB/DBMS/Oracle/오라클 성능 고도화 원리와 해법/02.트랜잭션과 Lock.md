# 트랜잭션과 Lock
> 오라클은 읽기 일관성을 구현할 때 Lock이 아닌, Undo 데이터를 이용해 구현한다는 것이 핵심
* DB2, SQL Server, Sybase 등은 Lock을 통해 읽기 일관성 구현

<hr>
<br>

## 트랜잭션 동시성 제어
#### 

<br>

### 동시성 제어 (Concurrency Control)
* 동시성 (Concurrency)과 일관성 (Consistency)은 Trade-off 관계
  * 동시성 : 다중 사용자가 같은 데이터를 동시에 엑세스
  * 일관성 : 자신이 발생시킨 변경 사항과 다른 트랜잭션의 변경 사항을 포함해 일관성 있는 상태로 데이터를 제공

<br>

### 트랜잭션이란? 
* 여러 개의 수정작업이 하나의 작업처럼 전부 처리되거나 아예 전부 처리가 안 되도록 (All or Nothing)하는 것
  * 이러한 일의 최소 단위가 트랜잭션 (원자성)

<br>

### 트랜잭션 특징 (ACID)
* 원자성 (Atomicity)
  * All or Nothing, 더 이상 분해가 불가능한 업무의 최소단위를 말한다
* 일관성 (Consistency)
  * 트랜잭션이 실행을 성공적으로 완료하면 언제나 일관성 있는 데이터베이스 상태로 변환한다
* 격리성 (Isolation)
  * 트랜잭션이 실행 중에 생성하는 연산의 중간 결과는 다른 트랜잭션이 접근할 수 없다
* 영속성 (Durability)
  * 트랜잭션이 일단 그 실행을 성공적으로 완료하면 그 결과는 데이터베이스에 영속적으로 저장된다
* 데이터의 일관성을 해치지 않기 위해 DBMS가 공통적으로 사용하는 매커니즘이 Lock이며, 오라클은 읽기 일관성을 보장하기 위해 Undo 데이터를 활용한다

<br>
<hr>
<br>

## 트랜잭션 수준 읽기 일관성
#### 

<br>

### 트랜잭션 수준 읽기 일관성이란?
* 문장 수준 읽기 일관성 (Statement-Level Read Consistency)
  * 쿼리가 시작된 시점을 기준으로 데이터를 일관성 있게 읽어들이는 것
  * 오라클이 완벽히 보장한다고 한다
* 트랜잭션 수준 읽기 일관성 (Transaction-Level Read Consistency)
  * 트랜잭션이 시작된 시점을 기준으로 일관성 있게 데이터를 읽어들이는 것
  * 오라클이 기본적으로 보장하지 않아서 트랜잭션 고립화 수준을 높여야 한다

<br> 

### 트랜잭션 고립화 수준
* ANSI/ISO SQL standard(SQL92)
  * Level 0 (Read Uncommitted)
  * Level 1 (Read Committed)
  * Level 2 (Repeatable Read)
  * Level 3 (Serializable)

<div align="center" >
  <img width="50%" src="https://github.com/PoSungKim/development_study/assets/37537227/f19d2116-b875-4d0c-b0f7-12a50a7bafef" >
</div>

<br>
<hr>
<br>

