# 데이터 저장
> 
* ㅇㅇ

<hr>
<br>

## 물리적 관점
#### 

<br>

### 데이터베이스 저장 구조
* 논리적 - 물리적
  * 블록
  * 익스텐트 - 1개의 데이터파일 (.dbf)
  * 세그먼트 - n개의 데이터파일 (.dbf)
  * 테이블스페이스 - n개의 데이터파일 (.dbf)
  * 데이터베이스 - n개의 데이터파일 (.dbf)
* 데이터파일 경로 (테이블스페이스별로 데이터 파일이 1개인 경우)
  * /opt/oracle/oradata/XE/system01.dbf
  * /opt/oracle/oradata/XE/sysaux01.dbf
  * /opt/oracle/oradata/XE/users01.dbf
  * /opt/oracle/oradata/XE/undotbs01.dbf
* 링크 
  * [Oracle Help Center](https://docs.oracle.com/cd/B19306_01/server.102/b14220/logical.htm)

<br>

### 데이터파일
* 쿼리
  ```sql
  select distinct file_name, file_id
  from dba_data_files
  where ROWNUM < 100;
  ```
* 결과집합 (FILE_NAME | FILE_ID)
  * /opt/oracle/oradata/XE/system01.dbf | 1
  * /opt/oracle/oradata/XE/sysaux01.dbf | 3
  * /opt/oracle/oradata/XE/users01.dbf | 7
  * /opt/oracle/oradata/XE/undotbs01.dbf | 15

<br>

### 테이블스페이스
* 쿼리
  ```sql
  select distinct TABLESPACE_NAME
  from   DBA_TABLESPACES
  ```
* 결과집합 (TABLESPACE_NAME)
  * SYSTEM
  * SYSAUX
  * UNDOTBS1
  * TEMP
  * USERS

<br>

### 세그먼트
* 쿼리
  ```sql
  select distinct segment_type
  from DBA_SEGMENTS
  ```
* 결과집합 (SEGMENT_TYPE)
  * CLUSTER
  * INDEX
  * INDEX PARTITION
  * LOB PARTITION
  * LOBINDEX
  * LOBSEGMENT
  * NESTED TABLE
  * ROLLBACK
  * SYSTEM STATISTICS
  * TABLE
  * TABLE PARTITION
  * TABLE SUBPARTITION
  * TYPE2 UNDO
* 쿼리
  ```sql
  select distinct segment_type
  from DBA_SEGMENTS
  where segment_name = '주문'
  ```
* 결과집합 (TABLESPACE_NAME | SEGMENT_NAME | SEGMENT_TYPE | OWNER
  * SYSTEM | 주문 | TABLE | SYSTEM

<br>

### 익스텐트
* 쿼리 
  ```sql
  select *
  from DBA_EXTENTS
  where 1 = 1
    and segment_type = 'TABLE'
    and SEGMENT_NAME = '주문'
  ```
* 결과집합 (TABLESPACE_NAME | SEGMENT_NAME | SEGMENT_TYPE | OWNER | EXTENT_ID | FILE_ID | BLOCK_ID)
  * SYSTEM | 주문 | TABLE | SYSTEM | 0 | 1 | 114056
* 비고
  * Extent의 Block_id=익스텐트의 첫 번째 블록의 BLOCK_ID
    * 거기서부터 설정된 길이만큼 할당 받은 것

<br>
<hr>
<br>
