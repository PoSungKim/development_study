# 트랜잭션과 잠금
> MySQL의 동시성에 영향을 미치는 잠금(Lock)과 트랜잭션, 트랜잭션의 격리 수준 (Isolation Level)
* 잠금을 통해 동시성 제어 
* 트랜잭션을 통해 작업의 완전성과 데이터 정합성 보장 (Partial Update X)
* 격리 수준은 하나의 트랜잭션 내에서 또는 여러 트랜잭션 간의 작업 내용을 어떻게 공유하고 차단할 것인지 결정

<hr>
<br>

## 트랜잭션
#### 논리적 기능을 수행하기 위한 작업의 단위이자, 쪼갤 수 없는 업무의 최소단위

<br>

### MySQL vs MyISAM 트랜젝션
* MyISAM : 트랜젝션 지원 X
  * if-else 지옥으로 빠지는 길
* MySQL : 트랜잭션 지원 O
  * 하나의 논리적인 작업 셋에 n개의 쿼리가 있을 때, 논리적인 작업 셋 자체가 100% 적용 (COMMIT)되거나, 0% 적용 (ROLLBACK)됨을 보장

<br>

### 주의사항
* 트랜잭션 또한 DBMS의 컨넥션과 동일하게 꼭 필요한 최소의 코드에만 적용하는 것이 GOOD
* 대표적인 실수 : 모든 로직은 하나의 트랜잭션에 포함
  * validation 체크 로직
  * 파일 저장 로직
  * DBMS 저장 로직 
  * DBMS 조회 로직
  * 알림 및 메일 발송 로직
* 트랜잭션 범위를 작게 하자 (회사 혹은 서비스마다 차이가 분명히 존재)
  * 최대한 DBMS 저장 로직만 포함시키는 것이 좋다
  * `네트워크 작업이 있는 경우에는 반드시 트랜잭션에서 배제해야 한다`라고 적혀있는데, DBMS 서버가 높은 부하 상태로 빠지거나 위험한 상태에 빠지는 경우가 빈번히 발생한다고 한다. 
    * 이 부분도 회사/개인마다 차이가 존재할듯

<br>
<hr>
<br>
