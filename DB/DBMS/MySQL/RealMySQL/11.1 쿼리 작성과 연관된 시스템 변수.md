# 쿼리 작성 및 최적화
> SQL은 어떠한 (What) 데이터를 요청하기 위한 언어이지, 어떻게 (How) 데이터를 읽을 지를 표현하는 언어는 아니다
* 그럼에도, 내부적으로 어떻게 동작하는지를 이해한다면, 몇 십 배에서 몇 백 배까지의 성능 향상이 가능하다

<hr>
<br>

## 쿼리 작성과 연관된 시스템 변수
#### SQL 작성 규칙은 MySQL 서버의 시스템 설정에 따라 달라진다

<br>

### SQL 모드
* sql_mode
  * STRICT_ALL_TABLES, STRICT_TRANS_TABLES
    * MySQL 서버에서 INSERT나 UPDATE 문장으로 데이터를 변경하는 경우 칼럼의 타입과 저장되는 값의 타입이 다를 때 자동으로 타입 변경을 수행
    * STRICT_ALL_TABLES
      * 모든 스토리지 엔진에 대해 엄격한 모드(Strict Mode) 적용
    * STRICT_TRANS_TABLES
      * InnoDB 같은 트랜잭션을 지원하는 스토리지 엔진에만 엄격한 모드(Strict Mode) 적용
  * ANSI_QUOTES
    * '' 홀따옴표는 문자열 값 표기
    * "" 쌍따옴표는 칼러명이나 테이블과 같은 식별자(Identifier)를 구분하는 용도로 사용
  * ONLY_FULL_GROUP_BY
    * GROUP BY 절이 사용된 문장의 SELECT 절에는 GROUP BY 절에 명시된 칼럼과 집계 함수(COUNT 또는 SUM과 같은 그룹 함수)만 사용할 수 있다
  * PIPE_AS_CONCAT
    * || (문자열 연결 연산자 CONCAT)로 사용
  * PAD_CHAR_TO_FULL_LENGTH
    * 뒤쪽의 공백이 제거되지 않고 반환되어야 할 때 사용
  * NO_BACKSLASH_ESCAPE
    * \ 역슬래시 문자도 다른 문자와 동일하게 취급할 때 사용
  * IGNORE_SPACE
    * 프로시저나 함수명과 괄호 사이의 공백은 무시
  * REAL_AS_FLAT
    * REAL타입이 DOUBLE이 아닌, FLOAT 타입의 동의어로 변경
  * NO_ZERO_IN_DATE, NO_ZERO_DATE
    * 2020-00-00 같은 실제 존재하지 않는 날짜를 저장하지 않도록 할 때 사용
  * ANSI
    * 최대한 SQL 표준에 맞게 동작하게 만들어준다
    * REAL_AS_FLAT, PIPE_AS_CONCAT, ANSI_QUOTES, IGNORE_SPACE, ONLY_FULL_GROUP_BY
  * TRADITIONAL
    * STRICT_ALL_TABLES, STRICT_TRANS_TABLES, NO_ZERO_IN_DATE, NO_ZERO_DATE, ERROR_FOR_DIVISION_BY_ZERO, NO_ENGINE_SUBSTITUTION  
<br>

### 영문 대소문자 구분
* MySQL 서버는 설치된 운영체제에 따라 테이블명의 대소문자를 구분한다
  * DB나 테이블이 디스크의 디렉토리나 파일로 매핑되기 때문
  * 윈도우 MySQL 대소문자 구분 X
  * 유닉스 계열 MySQL 대소문자 구분 O
* lower_case_table_names 시스템 설정
  * 0 : DB, 테이블에 대해서 대소문자 구분 O
  * 1 : 소문자로만 저장되어 대소문자 구분 X
  * 2 : 윈도우와 macOS에서 저장은 대소문자 구분하는데, 쿼리에서는 대소문자 구분 X (굳이...?)

<br>

### MySQL 예약어
* 생성하는 데이터베이스나 테이블, 칼럼의 이름을 예약어와 같은 키워드로 생성하면 해당 칼럼이나 테이블을 SQL에서 사용하기 위해 항상 역따옴표(\`)나 쌍따옴표로 감싸야 한다

<br>

### 매뉴얼의 SQL 문법 표기를 읽는 방법
* 대문자
  * 키워드
* italic체
  * 사용자가 선택해서 작성하는 토큰을 의미
  * ex) 테이블명이나 칼럼명, 표현식
* 대괄호(\[])
  * 해당 키워드나 표현식 자체가 선택 사항임을 의미
* 파이프 (|)
  * 앞과 뒤의 키워드나 표현식 중에서 단 하나만 선택해서 사용할 수 있음을 의미
* 중괄호 ({})
  * 아이템 중 반드시 하나를 사용해야 한다를 의미
* ... 표기
  * 명시된 키워드나 표현식의 조합이 반복될 수 있음을 의미

<br>

### MySQL 연산자와 내장 함수

<br>
<hr>
<br>


