# 통계 정보
> MySQL 5.7 버전까지 테이블과 인덱스에 대한 개괄적인 정보를 가지고 실행 계획 수립
* MySQL 8.0 버전부터는 인덱스되지 않은 칼럼들에 대해서도 데이터 분포도를 수집해서 저항하는 히스토그램(Histogram) 정보 도입

<hr>
<br>

## 테이블 및 인덱스 통계 정보
#### 비용 기반 최적화에서 가장 중요한 것은 통계 정보

<br>

### MySQL 서버의 통계 정보
```mysql
SHOW TABLES LIKE '%_stats';
```
* innodb_index_stats
* innodb_table_stats

```mysql
CREATE TABLE tab_test (fd1 INT, fd2 VARCHAR(20), PRIMARY KEY(fd1))
ENGINE=InnoDB
STATS_PERSISTENT={ DEFAULT | 0 | 1 }
```
* STATS_PERSISTENT
  * 0 : OFF (휘발성으로 메모리에 적재)
  * 1 : ON  (영속성으로 DB에 적재)
  * DEFAULT : innodb_stats_persistent 시스템 변수 값 (default : 1)
* 통계 정보 칼럼
  * innodb_index_stats
    * `n_diff_pfx%` : 인덱스가 가진 유니크한 값의 개수 
    * `n_leaf_pages` : 인덱스의 리프 노드 페이지 개수
    * `size` : 인덱스 트리의 전체 페이지 개수
  * innodb_table_stats
    * `n_rows` : 테이블의 전체 레코드 건수
    * `clusterred_index_size` : 프라이머리 키의 크기 (InnoDB 페이지 개수)
    * `sum_of_other_index_sizes` : 프라이머리 키를 제외한 인덱스의 크기(InnoDB 페이지 개수)

<br>
<hr>
<br>

## 
#### 

<br>

###

<br>
<hr>
<br>
