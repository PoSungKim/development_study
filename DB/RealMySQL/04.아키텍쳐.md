# 아키텍처 
> MySQL 서버 = 사람의 머리 역할을 담당하는 MySQL 엔진과 손발 역할을 담당하는 스토리지 엔진
* 손과 발 역할을 담당하는 스토리지 엔진은 핸들러 API를 만족하면 누든지 스토리지 엔진을 구현해서 MySQL 서버에 추가해서 사용 가능

<hr>
<br>

## 
#### 

<br>

### MySQL 엔진 아키텍처

<div align="center" width="50%" >
    <img src="https://user-images.githubusercontent.com/37537227/211307302-ce4ce8c7-07ad-4eeb-bb66-f315eeb87e4d.png" />
</div>

<br>

### MySQL 엔진
* 커넥션 핸들러
* SQL 인터페이스
* SQL 파서
* SQL 옵티마이저
* 캐시 & 버퍼

<br>

### 스토리지 엔진
* MySQL 서버 : 1개의 MySQL 엔진 + N개의 스토리지 엔진으로 구성 가능
```mysql
CREATE TABLE test_table (fd1 INT, fd2 INT) ENGINE=INNODB;
```
* 각 스토리지 엔진은 성능 향상을 위해 키 캐시 (MyISAM 스토리지 엔진) 혹은 InnoDB 버퍼 풀 (InnoDB 스토리지 엔진)과 같은 기능을 내장하고 있다

<br>

### 핸들러 API
* MySQL 엔진의 쿼리 실행기에서 데이터를 쓰거나 읽어야 할 때 각 스토리지 엔진에 쓰기 또는 읽기를 요청하는데, 이러한 요청을 핸들러 (Handler) 요청이라 하고, 여기서 사용되는 API를 핸들러 API라고 한다.
```mysql
SHOW GLOBAL STATUS LIKE 'Handler%';
```

<br>

### MySQL 스레딩 구조
* MySQL은 프로세스 기반이 아니라 쓰레드 기반으로 작동
  * Foreground 쓰레드 + Background 쓰레드
```mysql
SELECT thread_id, name, type, processlist_user, processlist_host
FROM   performance_shema.threads ORDER BY type, thread_id;
```
* 대부분의 Thread는 Background
* 소수의 Thread는 Foreground
  * 실제 사용자의 요청을 처리하는 Foreground 쓰레드는 `thread/sql/one_connection`

<br>

### 

<br>
<hr>
<br>
