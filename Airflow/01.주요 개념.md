# 주요 개념
> 33
* ㅇ

<hr>
<br>

##
####

<br>

### [Simple Initiation Command]
```bash
# Airflow 설치
pip3 install airflow
```

```bash
Installing collected packages: ...flask-wtf, Flask-SQLAlchemy, flask-session, Flask-OpenID, flask-login, Flask-JWT-Extended, flask-caching, Flask-Babel, connexion, flask-appbuilder, apache-airflow
```
* airflow 내부는 Flask로 구성되어 있음을 파악 가능

```bash
# Airflow Directory
cd $HOME/airflow

# Check Configuration 
airflow config list

# Metastore
airflow db init   

# Scheduler
airflow scheduler

# Web UI
airflow webserver -p 8080

# Login Info
airflow users create \
          -u admin \
          -f FIRST_NAME \
          -l LAST_NAME \
          -r Admin \
          -e admin@example.org
```

```bash
[2022-03-17 00:07:52,252] {manager.py:214} INFO - Added user admin
User "admin" created with role "Admin"
```

<div align="center">
  <img width="80%" src="https://user-images.githubusercontent.com/37537227/158622781-86037284-df24-45af-9928-c3e0aa56ea9d.png">
</div>

<div align="center">
  <img width="80%" src="https://user-images.githubusercontent.com/37537227/158622595-53ebba50-0a5b-4b7d-a187-80f0d157bf6f.png">
</div>

<br>

### [Other CLI Commands]
```bash
airflow -h
```

```bash
positional arguments:
  GROUP_OR_COMMAND

    Groups:
      celery         Celery components
      config         View configuration
      connections    Manage connections
      dags           Manage DAGs
      db             Database operations
      jobs           Manage jobs
      kubernetes     Tools to help run the KubernetesExecutor
      pools          Manage pools
      providers      Display providers
      roles          Manage roles
      tasks          Manage tasks
      users          Manage users
      variables      Manage variables

    Commands:
      cheat-sheet    Display cheat sheet
      info           Show information about current Airflow and environment
      kerberos       Start a kerberos ticket renewer
      plugins        Dump information about loaded plugins
      rotate-fernet-key
                     Rotate encrypted connection credentials and variables
      scheduler      Start a scheduler instance
      standalone     Run an all-in-one copy of Airflow
      sync-perm      Update permissions for existing roles and optionally DAGs
      triggerer      Start a triggerer instance
      version        Show the version
      webserver      Start a Airflow webserver instance

```

<br>

### [Run Dags]
```bash
airflow dags list
```

```bash
dag_id                                  | filepath                                                                                                  | owner   | paused
========================================+===========================================================================================================+=========+=======
example_bash_operator                   | /opt/homebrew/lib/python3.9/site-packages/airflow/example_dags/example_bash_operator.py                   | airflow | True
example_branch_datetime_operator_2      | /opt/homebrew/lib/python3.9/site-packages/airflow/example_dags/example_branch_datetime_operator.py        | airflow | True
```

```bash
airflow tasks list example_bash_operator
```

```bash
lso_run_this
run_after_loop
run_this_last
runme_0
runme_1
runme_2
this_will_skip
```

```bash
airflow dags trigger -e 2022-03-15 example_bash_operator
```

<br>
<hr>
<br>

## Web UI
#### 

<br>

### [HomePage - Dags]
<div align="center">
  <img width="80%" src="https://user-images.githubusercontent.com/37537227/158630352-c184d3a4-1ad0-4358-a520-bf9153f58fc7.png">
</div>

* Recent Tasks
  * none
  * removed
  * scheduled
  * queued
  * running
  * success
  * shutdown
  * restarting
  * failed
  * up_for_retry
  * up_for_reschedule
  * upstreamed_failed
  * skipped
  * sensing
  * deferred


<br>

### [Schedule]
<div align="center">
  <img width="70" src="https://user-images.githubusercontent.com/37537227/158633395-a5b8b4b8-79c4-4604-8b36-8fbc8be0fb62.png">
  <img width="60%" src="https://user-images.githubusercontent.com/37537227/158633146-7c15b42a-50d5-419f-8fce-fc806a767d30.png">
</div>

<br>

### [Links]
<div align="center">
    <img width="80%" src="https://user-images.githubusercontent.com/37537227/158634575-36216b85-1401-4869-98cf-faa7ef687c45.png">
</div>

<div align="center">
  <img width="80%" src="https://user-images.githubusercontent.com/37537227/158636806-2aa0c291-45fc-49d8-ac25-17adeba1ea1a.png">
</div>
  
<div align="center">
  <img width="80%" src="https://user-images.githubusercontent.com/37537227/158636654-c64fe88a-b562-43f5-8255-594c525483d3.png">
</div>

<div align="center">
  <img width="80%" src="https://user-images.githubusercontent.com/37537227/158638944-6cd1a619-73a0-4f57-aa08-b831046de460.png">
</div>

<div align="center">
  <img width="80%" src="https://user-images.githubusercontent.com/37537227/158639714-035c215b-f8df-44e3-9fc9-85d3070718ab.png">
</div>

* Code : Dag 파일 바로 확인 가능

<br>
<hr>
<br>
