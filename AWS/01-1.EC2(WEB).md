# AWS EC2 (WEB)
> WEB 서버로 React 구동
* Apache HTTPD, Nginx 모두 가능

<hr>
<br>

## Nginx 구축 [:80]
#### Async, Event-driven

<br>

### [WEB 서버 설치 및 실행]
```bash
# $releasever 확인
uname -a
uname -r
cat /etc/os-release
```

```bash
# yum repository에 Nginx 추가
sudo vi /etc/yum.repos.d/nginx.repo # add NGINX yum repository

[nginx]
name=nginx repo
baseurl=https://nginx.org/packages/centos/5/$basearch/
gpgcheck=0
enabled=1
```

```bash
# yum repository에서 nginx 정보 확인
yum info nginx

Failed to set locale, defaulting to C
Loaded plugins: extras_suggestions, langpacks, priorities, update-motd
amzn2-core                                                                                                                                                                           | 3.7 kB  00:00:00
nginx                                                                                                                                                                                | 2.5 kB  00:00:00
nginx/x86_64/primary_db                                                                                                                                                              |  20 kB  00:00:01
Available Packages
Name        : nginx
Arch        : x86_64
Version     : 1.10.3
Release     : 1.el5.ngx
Size        : 965 k
Repo        : nginx/x86_64
Summary     : High performance web server
URL         : http://nginx.org/
License     : 2-clause BSD-like license
Description : nginx [engine x] is an HTTP and reverse proxy server, as well as
            : a mail proxy server.
```

```bash
# Nginx 설치
sudo yum install nginx

sudo amazon-linux-extras install nginx1 #AWS EC2 환경
```

```bash
# Nginx 버전 확인
nginx -v

nginx version: nginx/1.20.0 #2022.06.09 기준
```

```bash
# Nginx 실행/재실행/중지
sudo service nginx start
sudo service nginx restart
sudo service nginx stop
```

```bash
# Nginx 상태 확인
sudo systemctl status nginx

ps -ef | grep nginx
```

<br>

### [세부 설정 - [Beginners' Guide](https://nginx.org/en/docs/beginners_guide.html)]
```bash
# conf 파일 찾기
sudo find / -name nginx.conf

/etc/nginx/nginx.conf
```

<br>

```bash
# default 세팅 생성
sudo vi /etc/nginx/conf.d/default.conf

server {
        listen 80;
        location / {
                root /home/benebean/front;
                index index.html;
                try_files $uri $uri/ /index.html;
        }
}
```
* location : 해당 디렉토리를 포함하는 모든 Request를 root로 설정된 곳에서 찾도록 설정
* React의 SPA 특징을 활용하기 위해서는 추가 설정 필요
  * react-router를 사용하기 위해서는 모든 Request가 index.html를 향하게 설정

<br>
<hr>
<br>

## Apache HTTPD 구축 [:80]
#### Thread-programming

<br>

### [WEB 서버 설치 및 실행]
```bash
sudo yum install httpd -y
sudo service httpd start &

ps -ef | grep httpd
```

<br>

### [WEB 서버 HTML/CSS/JS 구축]
```bash
cd /var/www/html
scp -i ${pemDir} ${localDir} {ec2Dir}

sudo scp -r -i "Data_Engineering_Seoul.pem" /Users/posungkim/Desktop/Portfolio/git/chatbot_react/public/* ec2-user@ec2-13-124-198-75.ap-northeast-2.compute.amazonaws.com:/var/www/html

aws s3 cp s3://data-engineering-fintech/WEB/ /var/www/html/ --recursive
```

<br>
<hr>
<br>
