# ì• ê·¸ë¦¬ê±°íŠ¸
> 
* 

<hr>
<br>

## ì• ê·¸ë¦¬ê±°íŠ¸
#### ê´€ë ¨ëœ ê°ì²´ë¥¼ í•˜ë‚˜ì˜ êµ°ìœ¼ë¡œ...

<br>

### ì• ê·¸ë¦¬ê±°íŠ¸
* ê´€ë ¨ëœ ê°ì²´ë¥¼ í•˜ë‚˜ì˜ êµ°ìœ¼ë¡œ ë¬¶ì–´ ì¤Œ
  * ê°™ê±°ë‚˜ ë¹„ìŠ·í•œ ë¼ì´í”„ì‹¸ì´í´ì„ ê°–ëŠ”ë‹¤ (ex : Order-OrderLine)
  * ë³„ë„ì˜ ë¼ì´í”„ì‹¸ì´í´ì„ ê°–ëŠ” ê´€ê³„ì—ì„œëŠ” ì„œë¡œ ë‹¤ë¥¸ ì• ê·¸ë¦¬ê±°íŠ¸ê°€ ëœë‹¤ (ex : ìƒí’ˆ-ë¦¬ë·°)
* ìƒìœ„ ìˆ˜ì¤€ì—ì„œ ë„ë©”ì¸ ëª¨ë¸ ê°„ì˜ ê´€ê³„ íŒŒì•… ê°€ëŠ¥! ì‘ì€ ê·¸ë¦¼ë§Œ íŒŒì•…í•´ì„œëŠ” ìš”êµ¬ì‚¬í•­ì— ëŒ€í•´ì„œ ì½”ë“œ ìˆ˜ì •ì„ ìµœì†Œí•œìœ¼ë¡œ í•˜ëŠ” í˜‘ì˜ë¡œë§Œ ê°ˆ ìˆ˜ë°–ì— ì—†ìŒ!
* ì• ê·¸ë¦¬ê±°íŠ¸ì˜ ê²½ê³„ ì„¤ì •ì˜ ê¸°ë³¸
  * `ë„ë©”ì¸ ê·œì¹™`
  * `ìš”êµ¬ì‚¬í•­`
* Example
```markdown
- ì£¼ë¬¸
  âŒ Order
  âŒ Orderer
  âŒ Shipping Info
  âŒ Receiver
  âŒ Address
  âŒ Delivery Tracking 
  âŒ OrderLine 
- ê²°ì œ
  âŒ Payment Info
- ë¶„ë¥˜
  âŒ Category
- ìƒí’ˆ
  âŒ Product
- ë¦¬ë·°
  âŒ Review
- íšŒì›
  âŒ Member
  âŒ Member Grade
```
* ì£¼ë¬¸ (Order)ê°€ ì¢‹ì€ ì˜ˆì‹œì¸ë°, `í•¨ê»˜ ìƒì„±`ë˜ê³  `í•¨ê»˜ ë³€ê²½`ë˜ë©´ ê°™ì€ ì• ê·¸ë¦¬ê±°íŠ¸ì— ì†í•  í™•ë¥ ì´ ë†’ë‹¤
  * `Order`ì™€ `OrderLine`ì˜ ê´€ê³„ì²˜ëŸ¼
  * `Order`ì™€ `Orderer ë° ShippingInfo`ì˜ ê´€ê³„ì²˜ëŸ¼
* ìƒí’ˆ (Product)ì™€ ë¦¬ë·° (Review)ëŠ” ë‹¤ë¥¸ ì• ê·¸ë¦¬ê±°íŠ¸

<br>

## ì• ê·¸ë¦¬ê±°íŠ¸ ë£¨íŠ¸
#### ë˜ê·¸ë¦¬ê±°íŠ¸ ì „ì²´ë¥¼ ê´€ë¦¬í•  ì£¼ì²´

<br>

### ì• ê·¸ë¦¬ê±°íŠ¸ ë£¨íŠ¸
* `ì£¼ë¬¸ ì• ê·¸ë¦¬ê±°íŠ¸` êµ¬ì„± ì—”í‹°í‹°
  * ì´ ê¸ˆì•¡ì¸ totalAmountsë¥¼ ê°–ê³  ìˆëŠ” Order ì—”í‹°í‹°
  * ê°œë³„ êµ¬ë§¤ ìƒí’ˆì˜ ê°œìˆ˜ì¸ quantityì™€ ê¸ˆì•¡ì¸ priceë¥¼ ê°–ê³  ìˆëŠ” OrderLine ë°¸ë¥˜
* `ë„ë©”ì¸ ê·œì¹™`
  * $ì£¼ë¬¸ ì´ ê¸ˆì•¡ = ê°œë³„ ìƒí’ˆì˜ ì£¼ë¬¸ ê°œìˆ˜ \times ê°€ê²©ì˜ í•©$
* ì• ê·¸ë¦¬ê±°íŠ¸ ë£¨íŠ¸
  * ë˜ê·¸ë¦¬ê±°íŠ¸ ì „ì²´ë¥¼ ê´€ë¦¬í•  ì£¼ì²´ë¡œ, ì• ê·¸ë¦¬ê±°íŠ¸ì— ì†í•œ ëª¨ë“  ê°ì²´ê°€ ì •ìƒ ìƒíƒœì„ì„ ê´€ë¦¬

<br>

### ë„ë©”ì¸ ê·œì¹™ê³¼ ì¼ê´€ì„±
* ì£¼ë¬¸ ì• ê·¸ë¦¬ê±°íŠ¸ëŠ” `ë°°ì†¡ì§€ ë³€ê²½`, `ìƒí’ˆ ë³€ê²½` ë“±ì˜ ê¸°ëŠ¥ì„ ì œê³µ
  * ì• ê·¸ë¦¬ê±°íŠ¸ ë£¨íŠ¸ì¸ `Order`ê°€ ê¸°ëŠ¥ì„ êµ¬í˜„í•œ ë©”ì†Œë“œ ì œê³µ

```java
public class Order {
    
    private ShippingInfo shippingInfo;
    
    // ì• ê·¸ë¦¬ê±°íŠ¸ ë£¨íŠ¸ëŠ” ë„ë©”ì¸ ê·œì¹™ì„ êµ¬í˜„í•œ ê¸°ëŠ¥ì„ ì œê³µ
    public void changeShippingInfo(ShippingInfo newShippingInfo) {
        verifyNotYetShipped();
        setShippingInfo(newShippingInfo);
    }
    
    private void verifyNotYetSipped() {
        if (state != OrderState.PAYMENT_WAITING && state != OrderState.PREPARING)
            throw new IllegalStateEception("already shipped");
    }
    
}
```
* ë°°ì†¡ì§€ ë³€ê²½ ê¸°ëŠ¥ì˜ ë„ë©”ì¸ ê·œì¹™
  * `ë°°ì†¡ì´ ì‹œì‘ë˜ê¸° ì „ê¹Œì§€ë§Œ ë°°ì†¡ì§€ ì •ë³´ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤`

```java

```
* ì• ê·¸ë¦¬ê±°íŠ¸ ì™¸ë¶€ì—ì„œ ì• ê·¸ë¦¬ê±°íŠ¸ì— ì†í•œ ê°ì²´ë¥¼ ì§ì ‘ ë³€ê²½í•˜ë©´ ì•ˆ ëœë‹¤
* ë”°ë¼ì„œ, ì• ê·¸ë¦¬ê±°íŠ¸ ë£¨íŠ¸ë¥¼ í†µí•´ì„œë§Œ ë„ë©”ì¸ ë¡œì§ì„ êµ¬í˜„
  * ë‹¨ìˆœíˆ í•„ë“œë¥¼ ë³€ê²½í•˜ëŠ” set ë©”ì†Œë“œë¥¼ ê³µê°œ(public) ë²”ìœ„ë¡œ ë§Œë“¤ì§€ ì•ŠëŠ”ë‹¤
  * ë°¸ë¥˜ íƒ€ì…ì€ ë¶ˆë³€ìœ¼ë¡œ êµ¬í˜„í•œë‹¤

<br>

### ì• ê·¸ë¦¬ê±°íŠ¸ ë£¨íŠ¸ì™€ ì—­í• 
* ì• ê·¸ë¦¬ê±°íŠ¸ ë£¨íŠ¸ëŠ” ì• ê·¸ë¦¬ê±°íŠ¸ ë‚´ë¶€ì˜ ë‹¤ë¥¸ ê°ì²´ë¥¼ ì¡°í•©í•´ì„œ ê¸°ëŠ¥ ì™„ì„±

<br>

### ì• ê·¸ë¦¬ê±°íŠ¸ ë£¨íŠ¸ì™€ ì—­í•  Example (1) GOOD ğŸ‘
```java
public class Order {
    private Money totalAmounts;
    private List<OrderLine> orderLines;
    
    private void calculateTotalAmounts() {
        int sum = orderLines.stream()
                            .mapToInt(ol -> ol.getPrice() * ol.getQuantity())
                            .sum();
                            
        this.totalAmounts = new Money(sum);
    }
}
```

```java
public class Member {
    private Password password;
    
    public void changePassword(String currentPassword, String newPassword) {
        if (!password.match(currentPassword) {
            throw new PAsswordNotMatchException();
        }
    }
    this.password = new Password(newPassword);
}
```

### ì• ê·¸ë¦¬ê±°íŠ¸ ë£¨íŠ¸ì™€ ì—­í•  Example (2) GOOD ğŸ‘
```java
public class OrderLine {
    private List<OrderLine> lines;
    
    public Money getTotalAmounts() {
        // êµ¬í˜„
    }
    
    public void changeOrderLines(List<OrderLine> newLines) {
        this.lines = newLines;
    }
}
```

```java
public class Order { 
    private Money totalAmounts;
    private OrderLines orderLines;
    
    public void changeOrderLines(List<OrderLine> newLines) {
        orderLines.changeOrderLines(newLines);
        this.totalAmounts = orderLines.getTotalAmounts();
    }
}
```

### ì• ê·¸ë¦¬ê±°íŠ¸ ë£¨íŠ¸ì™€ ì—­í•  Example (3) BAD ğŸ‘
```java
OrderLines lines = order.getOrderLines();
lines.changeOrderLines(newOrderLines);
```
* ì£¼ë¬¸ì˜ OrderLineì´ ë°”ë€ŒëŠ”ë° ì´í•©ì€ ê³„ì‚°í•˜ì§€ ì•ŠëŠ” ë²„ê·¸ë¥¼ ì•¼ê¸°
* í•´ê²°ì•ˆ) ì™¸ë¶€ì—ì„œ OrderLine ëª©ë¡ì„ ë³€ê²½í•˜ì§€ ëª»í•˜ë„ë¡ í•¨
  * íŒ¨í‚¤ì§€ë‚˜ protected ë²”ìœ„ ì‚¬ìš©

<br>

### ì• ê·¸ë¦¬ê±°íŠ¸ì™€ ë¦¬í¬ì§€í† ë¦¬

<br>

### IDë¥¼ ì´ìš©í•œ ì• ê·¸ë¦¬ê±°íŠ¸ ì°¸ì¡°

<br>
<hr>
<br>
